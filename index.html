<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ìƒíƒœê³„ ë¨¹ì´ì‚¬ìŠ¬ ë¹„ìœ¨ ëª¨ë¸ë§ â€¢ Food Chain Ratio Modeler</title>
  <style>
    :root{
      --bg:#0b1220;--panel:#0f1a2f;--muted:#96a0b5;--text:#e8eefc;--accent:#6dd5fa;--accent2:#2980b9;--radius:16px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family:'Noto Sans KR',sans-serif;background:radial-gradient(1200px 800px at 80% -10%,rgba(109,213,250,.25),transparent 60%),radial-gradient(900px 700px at -20% 20%,rgba(41,128,185,.3),transparent 60%),var(--bg);color:var(--text);display:flex;flex-direction:column}
    header{padding:24px clamp(16px,3vw,28px);display:flex;justify-content:space-between;align-items:center;gap:20px;flex-wrap:wrap}
    h1{margin:0;font-size:clamp(20px,3.6vw,34px)}
    .layout{flex:1;display:grid;grid-template-columns:340px 1fr 320px;gap:20px;padding:0 clamp(16px,3vw,28px) 28px}
    @media(max-width:1100px){.layout{grid-template-columns:1fr}}
    .card{background:linear-gradient(180deg,rgba(255,255,255,.05),rgba(255,255,255,.02));border:1px solid rgba(255,255,255,.08);border-radius:var(--radius);padding:18px;overflow:auto}
    h2{margin-top:0;font-size:18px}
    label{font-size:13px;color:var(--muted)}
    input,select{width:100%;padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,.1);background:#0e1730;color:var(--text)}
    .btn{background:linear-gradient(90deg,var(--accent2),var(--accent));border:none;color:#0c1326;padding:10px 14px;border-radius:12px;cursor:pointer}
    .pyramid .bar{display:flex;align-items:center;gap:10px;margin-bottom:6px}
    .bar-rect{height:24px;border-radius:999px;background:linear-gradient(90deg,rgba(109,213,250,.3),rgba(41,128,185,.5))}
    table{width:100%;border-collapse:collapse;font-size:13px}
    th,td{padding:6px 10px;border-bottom:1px solid rgba(255,255,255,.05)}
    th:first-child,td:first-child{text-align:left}
    /* ê°œë… ì˜ì—­ */
    .concepts ul{padding-left:18px}
    .concepts li{margin-bottom:8px;color:var(--muted);font-size:14px}
  </style>
</head>
<body>
<header>
  <div>
    <h1>ğŸŒ¿ ìƒíƒœê³„ ë¨¹ì´ì‚¬ìŠ¬ ë¹„ìœ¨ ëª¨ë¸ë§</h1>
    <p style="color:var(--muted);font-size:14px">Ecosystem Food Chain Ratio Modeling â€” ì˜ì–‘ ë‹¨ê³„ë³„ ì—ë„ˆì§€ íë¦„ì„ ì‹œê°í™”</p>
  </div>
</header>
<main class="layout">
  <!-- ì¢Œì¸¡: ì„¤ì • -->
  <section class="card">
    <h2>ëª¨ë¸ ì„¤ì •</h2>
    <label>ê¸°ì´ˆ ìƒì‚° ì—ë„ˆì§€ (kcal)</label>
    <input type="number" id="baseEnergy" value="10000" min="1" max="1000000"><br><br>
    <label>ì „ì´ íš¨ìœ¨ (%)</label>
    <input type="number" id="efficiency" value="10" min="1" max="30"><br><br>
    <label>ì˜ì–‘ ë‹¨ê³„ ìˆ˜</label>
    <input type="range" id="levels" min="2" max="6" value="4"><span id="lvlOut">4</span><br><br>
    <button class="btn" id="run">ê³„ì‚°í•˜ê¸°</button>
  </section>

  <!-- ì¤‘ì•™: ì‹œê°í™” -->
  <section class="card">
    <h2>ì—ë„ˆì§€ í”¼ë¼ë¯¸ë“œ</h2>
    <div id="pyramid" class="pyramid"></div>
    <h2>ê²°ê³¼ í‘œ</h2>
    <table id="table">
      <thead><tr><th>ë‹¨ê³„</th><th>ì—ë„ˆì§€ (kcal)</th><th>ì „ ë‹¨ê³„ ëŒ€ë¹„ (%)</th><th>ëˆ„ì  (%)</th></tr></thead>
      <tbody></tbody>
    </table>
  </section>

  <!-- ìš°ì¸¡: ê°œë… ì •ë¦¬ -->
  <aside class="card concepts">
    <h2>ğŸ“˜ ëª¨ë¸ë§ ê°œë… ì •ë¦¬</h2>
    <ul>
      <li><strong>ìƒì‚°ì (Producers):</strong> ê´‘í•©ì„±ì„ í†µí•´ ì—ë„ˆì§€ë¥¼ ìƒì„±í•˜ëŠ” ìƒë¬¼ (ì˜ˆ: ì‹ë¬¼, ì¡°ë¥˜)</li>
      <li><strong>ì†Œë¹„ì (Consumers):</strong> ë‹¤ë¥¸ ìƒë¬¼ì„ ë¨¹ì–´ ì—ë„ˆì§€ë¥¼ ì–»ëŠ” ìƒë¬¼ (1ì°¨, 2ì°¨, 3ì°¨ ë“±)</li>
      <li><strong>ì „ì´ íš¨ìœ¨ (Transfer Efficiency):</strong> í•œ ë‹¨ê³„ì—ì„œ ë‹¤ìŒ ë‹¨ê³„ë¡œ ì „ë‹¬ë˜ëŠ” ì—ë„ˆì§€ ë¹„ìœ¨ (ë³´í†µ 10%)</li>
      <li><strong>ìƒë¬¼ëŸ‰ (Biomass):</strong> íŠ¹ì • ë‹¨ê³„ì— ì¡´ì¬í•˜ëŠ” ìƒë¬¼ë“¤ì˜ ì´ ì§ˆëŸ‰</li>
      <li><strong>ì—ë„ˆì§€ í”¼ë¼ë¯¸ë“œ (Energy Pyramid):</strong> ê° ë‹¨ê³„ì˜ ì—ë„ˆì§€ë¥¼ ì‹œê°ì ìœ¼ë¡œ ë‚˜íƒ€ë‚¸ ë„í‘œ</li>
      <li><strong>10% ë²•ì¹™ (10% Law):</strong> ì—ë„ˆì§€ ì „ë‹¬ ì‹œ ì•½ 10%ë§Œ ë‹¤ìŒ ë‹¨ê³„ë¡œ ì´ë™</li>
      <li><strong>ë™ì  ëª¨ë¸ (Dynamic Model):</strong> ì‹œê°„ì— ë”°ë¼ ë³€í™”í•˜ëŠ” ë¨¹ì´ì‚¬ìŠ¬ ê´€ê³„ë¥¼ ì‹œë®¬ë ˆì´ì…˜í•˜ëŠ” ìˆ˜í•™ì  ëª¨ë¸</li>
      <li><strong>ì¶©ê²© ì‹œë‚˜ë¦¬ì˜¤ (Perturbation):</strong> íŠ¹ì • ë‹¨ê³„ì˜ ê°ì†Œê°€ ìƒìœ„ ë‹¨ê³„ì— ë¯¸ì¹˜ëŠ” íŒŒê¸‰ íš¨ê³¼ë¥¼ ê´€ì°°</li>
    </ul>
  </aside>
</main>
<script>
const pyramid=document.getElementById('pyramid');
const tableBody=document.querySelector('#table tbody');
const baseEnergy=document.getElementById('baseEnergy');
const efficiency=document.getElementById('efficiency');
const levels=document.getElementById('levels');
const lvlOut=document.getElementById('lvlOut');
levels.addEventListener('input',()=>lvlOut.textContent=levels.value);

document.getElementById('run').addEventListener('click',()=>{
  const base=Number(baseEnergy.value);
  const eff=Number(efficiency.value)/100;
  const L=Number(levels.value);
  let energies=[base];
  for(let i=1;i<L;i++) energies[i]=energies[i-1]*eff;

  const maxE=Math.max(...energies);
  pyramid.innerHTML='';
  for(let i=L-1;i>=0;i--){
    const bar=document.createElement('div');
    bar.className='bar';
    const label=document.createElement('div');label.style.width='140px';label.textContent=i===0?'ìƒì‚°ì':i+'ì°¨ ì†Œë¹„ì';
    const rect=document.createElement('div');rect.className='bar-rect';rect.style.width=(energies[i]/maxE*100)+'%';
    const val=document.createElement('div');val.textContent=energies[i].toFixed(0)+' kcal';
    bar.append(label,rect,val);pyramid.appendChild(bar);
  }

  tableBody.innerHTML='';
  for(let i=0;i<L;i++){
    const prev=i===0?energies[0]:energies[i-1];
    const tr=document.createElement('tr');
    tr.innerHTML=`<td>${i===0?'ìƒì‚°ì':i+'ì°¨ ì†Œë¹„ì'}</td><td>${energies[i].toFixed(0)}</td><td>${i===0?'-':(energies[i]/prev*100).toFixed(2)}</td><td>${(energies[i]/energies[0]*100).toFixed(2)}</td>`;
    tableBody.appendChild(tr);
  }
});
</script>
</body>
</html>
